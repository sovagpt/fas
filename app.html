<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>TitLiquid - Trading App</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, sans-serif;
            background: #0a0a0a;
            color: #ffffff;
            overflow-x: hidden;
        }

        .navbar {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 1rem 2rem;
            background: rgba(15, 15, 15, 0.95);
            backdrop-filter: blur(10px);
            border-bottom: 1px solid #1a1a1a;
            z-index: 1000;
        }

        .logo {
            display: flex;
            align-items: center;
            gap: 0.5rem;
            font-size: 1.1rem;
            font-weight: 600;
        }

        .logo-icon {
            width: 28px;
            height: 28px;
        }

        .token-info {
            display: flex;
            align-items: center;
            gap: 0.75rem;
            font-size: 0.95rem;
        }

        .token-price {
            color: #888;
        }

        .price-change {
            color: #22c55e;
            font-weight: 600;
        }

        .btn-connect {
            background: linear-gradient(135deg, #ff1493, #ff69b4);
            color: #fff;
            padding: 0.6rem 1.5rem;
            border-radius: 8px;
            border: none;
            font-weight: 600;
            cursor: pointer;
            font-size: 0.9rem;
        }

        .main-container {
            display: flex;
            height: 100vh;
            padding-top: 60px;
        }

        .left-section {
            flex: 1;
            display: flex;
            flex-direction: column;
            border-right: 1px solid #1a1a1a;
        }

        .tabs {
            display: flex;
            gap: 0.5rem;
            padding: 1rem 1.5rem;
            border-bottom: 1px solid #1a1a1a;
        }

        .tab {
            padding: 0.5rem 1rem;
            background: transparent;
            color: #888;
            border: none;
            cursor: pointer;
            font-size: 0.9rem;
            font-weight: 500;
            border-radius: 6px;
            transition: all 0.2s;
        }

        .tab.active {
            background: #1a1a1a;
            color: #fff;
        }

        .chart-container {
            flex: 1;
            padding: 1.5rem;
            position: relative;
        }

        .birdeye-embed {
            width: 100%;
            height: 100%;
            border: none;
            border-radius: 12px;
            background: #0f0f0f;
        }

        .right-section {
            width: 350px;
            display: flex;
            flex-direction: column;
            background: #0f0f0f;
        }

        .swap-section {
            padding: 1.5rem;
            border-bottom: 1px solid #1a1a1a;
        }

        .swap-header {
            font-size: 1rem;
            font-weight: 600;
            margin-bottom: 1rem;
        }

        .btn-connect-wallet {
            width: 100%;
            background: linear-gradient(135deg, #ff1493, #ff69b4);
            color: #fff;
            padding: 1rem;
            border-radius: 12px;
            border: none;
            font-weight: 600;
            cursor: pointer;
            font-size: 1rem;
            transition: all 0.3s;
        }

        .btn-connect-wallet:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 25px rgba(255, 20, 147, 0.4);
        }

        .chat-section {
            flex: 1;
            display: flex;
            flex-direction: column;
            overflow: hidden;
        }

        .chat-header {
            padding: 1rem 1.5rem;
            border-bottom: 1px solid #1a1a1a;
            font-weight: 600;
            font-size: 0.95rem;
        }

        .chat-messages {
            flex: 1;
            overflow-y: auto;
            padding: 1rem 1.5rem;
            display: flex;
            flex-direction: column;
            gap: 1rem;
        }

        .chat-message {
            display: flex;
            flex-direction: column;
            gap: 0.25rem;
        }

        .message-header {
            display: flex;
            align-items: center;
            gap: 0.5rem;
            font-size: 0.85rem;
        }

        .message-username {
            color: #ff69b4;
            font-weight: 600;
        }

        .message-time {
            color: #666;
            font-size: 0.8rem;
        }

        .message-content {
            color: #ccc;
            font-size: 0.9rem;
            line-height: 1.4;
        }

        .chat-input-container {
            padding: 1rem 1.5rem;
            border-top: 1px solid #1a1a1a;
        }

        .chat-input {
            width: 100%;
            background: #1a1a1a;
            border: 1px solid #2a2a2a;
            border-radius: 8px;
            padding: 0.75rem;
            color: #fff;
            font-size: 0.9rem;
            font-family: inherit;
            resize: none;
        }

        .chat-input:focus {
            outline: none;
            border-color: #ff69b4;
        }

        .chat-footer {
            padding: 0.5rem 1.5rem;
            font-size: 0.8rem;
            color: #666;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .btn-send {
            background: linear-gradient(135deg, #ff1493, #ff69b4);
            color: #fff;
            padding: 0.5rem 1rem;
            border-radius: 6px;
            border: none;
            font-weight: 600;
            cursor: pointer;
            font-size: 0.85rem;
            margin-top: 0.5rem;
        }

        .chart-placeholder {
            width: 100%;
            height: 100%;
            background: #0f0f0f;
            border-radius: 12px;
            display: flex;
            align-items: center;
            justify-content: center;
            flex-direction: column;
            gap: 1rem;
            color: #666;
        }

        .chart-placeholder-icon {
            font-size: 3rem;
        }

        @media (max-width: 1024px) {
            .right-section {
                width: 300px;
            }
        }

        @media (max-width: 768px) {
            .main-container {
                flex-direction: column;
            }

            .left-section {
                border-right: none;
                border-bottom: 1px solid #1a1a1a;
                height: 60vh;
            }

            .right-section {
                width: 100%;
                height: 40vh;
            }
        }

        ::-webkit-scrollbar {
            width: 8px;
        }

        ::-webkit-scrollbar-track {
            background: #0a0a0a;
        }

        ::-webkit-scrollbar-thumb {
            background: #2a2a2a;
            border-radius: 4px;
        }

        ::-webkit-scrollbar-thumb:hover {
            background: #3a3a3a;
        }
    </style>
</head>
<body>
    <nav class="navbar">
        <div class="logo">
            <img src="https://cdn.prod.website-files.com/6740d85c4e3daeef29a89470/68da8361387b613d073b4155_ChatGPT%20Image%20Sep%2029%2C%202025%2C%2001_59_38%20PM%20(2).png" alt="TitLiquid" class="logo-icon">
            <span>titliquid</span>
        </div>
        <div class="token-info">
            <span>TL - USD</span>
            <span class="token-price">$0.006314</span>
            <span class="price-change">+131.00%</span>
        </div>
        <button class="btn-connect">Connect</button>
    </nav>

    <div class="main-container">
        <div class="left-section">
            <div class="tabs">
                <button class="tab active">Chart</button>
                <button class="tab">Swap</button>
            </div>
            <div class="chart-container">
                <!-- Birdeye Chart Embed -->
                <iframe 
                    class="birdeye-embed"
                    src="https://birdeye.so/tv-widget/5ThrLJDFpJqaFL36AvAX8ECZmz6n4vZvqMYvpHHkpump?chain=solana&viewMode=pair&chartType=CANDLE&chartInterval=5&chartTimezone=America%2FNew_York&chartLeftToolbar=show&theme=dark"
                    frameborder="0"
                    allowfullscreen>
                </iframe>
            </div>
        </div>

        <div class="right-section">
            <div class="swap-section">
                <div class="swap-header">Swap</div>
                <button class="btn-connect-wallet">Connect Wallet</button>
            </div>

            <div class="chat-section">
                <div class="chat-header">Chat</div>
                <div class="chat-messages" id="chatMessages">
                    <!-- Messages load here from Firebase -->
                </div>
                <div class="chat-input-container">
                    <input 
                        type="text" 
                        class="chat-input" 
                        placeholder="Message as lucky-panda-3472..." 
                        id="chatInput"
                        maxlength="200"
                    />
                    <button class="btn-send" onclick="sendMessage()">Send</button>
                    <div class="chat-footer">
                        <span id="charCount">0/200</span>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script type="module">
        import { initializeApp } from 'https://www.gstatic.com/firebasejs/10.7.1/firebase-app.js';
        import { getDatabase, ref, push, onChildAdded, query, limitToLast } from 'https://www.gstatic.com/firebasejs/10.7.1/firebase-database.js';

        // Firebase configuration
        const firebaseConfig = {
            apiKey: "AIzaSyC_UfJurpFUT_rtcPyADJAIuXRnoPnWfks",
            authDomain: "dontpump-fun.firebaseapp.com",
            databaseURL: "https://dontpump-fun-default-rtdb.firebaseio.com",
            projectId: "dontpump-fun",
            storageBucket: "dontpump-fun.firebasestorage.app",
            messagingSenderId: "893205405279",
            appId: "1:893205405279:web:796560ec0f3ea92cfec5ea",
            measurementId: "G-1HSZHVMK8L"
        };

        // Initialize Firebase
        const app = initializeApp(firebaseConfig);
        const database = getDatabase(app);
        const messagesRef = ref(database, 'titliquid-chat');

        // Generate random username
        const adjectives = ['perky', 'busty', 'swift', 'silent', 'lucky', 'bold', 'wild', 'fierce', 'smooth', 'divine'];
        const animals = ['panda', 'falcon', 'orca', 'lynx', 'otter', 'eagle', 'tiger', 'wolf', 'bear', 'fox'];
        
        function generateUsername() {
            const adj = adjectives[Math.floor(Math.random() * adjectives.length)];
            const animal = animals[Math.floor(Math.random() * animals.length)];
            const num = Math.floor(Math.random() * 9000) + 1000;
            return `${adj}-${animal}-${num}`;
        }

        // Get or create username for this session
        let username = localStorage.getItem('titliquid-username');
        if (!username) {
            username = generateUsername();
            localStorage.setItem('titliquid-username', username);
        }

        // Update placeholder with username
        const chatInput = document.getElementById('chatInput');
        chatInput.placeholder = `Message as ${username}...`;

        // Character counter
        const charCount = document.getElementById('charCount');
        chatInput.addEventListener('input', () => {
            charCount.textContent = `${chatInput.value.length}/200`;
        });

        // Display message in chat
        function displayMessage(data) {
            const chatMessages = document.getElementById('chatMessages');
            const messageEl = document.createElement('div');
            messageEl.className = 'chat-message';
            
            const time = new Date(data.timestamp).toLocaleTimeString('en-US', { 
                hour: '2-digit', 
                minute: '2-digit',
                hour12: false 
            });

            messageEl.innerHTML = `
                <div class="message-header">
                    <span class="message-username">${data.username}</span>
                    <span class="message-time">${time}</span>
                </div>
                <div class="message-content">${data.message}</div>
            `;

            chatMessages.appendChild(messageEl);
            chatMessages.scrollTop = chatMessages.scrollHeight;
        }

        // Load last 50 messages
        const recentMessagesQuery = query(messagesRef, limitToLast(50));
        
        // Listen for new messages
        onChildAdded(recentMessagesQuery, (snapshot) => {
            const data = snapshot.val();
            displayMessage(data);
        });

        // Send message function
        window.sendMessage = function() {
            const message = chatInput.value.trim();
            if (!message) return;

            // Push message to Firebase
            push(messagesRef, {
                username: username,
                message: message,
                timestamp: Date.now()
            });

            chatInput.value = '';
            charCount.textContent = '0/200';
        }

        // Send on Enter key
        chatInput.addEventListener('keypress', (e) => {
            if (e.key === 'Enter') {
                sendMessage();
            }
        });
    </script>
</body>
</html>
